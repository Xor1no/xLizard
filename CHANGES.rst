[file name]: CHANGES.rst
[file content begin]
Version 1.1.4 (18-09-2025)
--------------------------

**Обновление пороговых значений метрик и улучшение обработки отключенных функций**

Этот выпуск обновляет пороговые значения метрик в соответствии с новыми требованиями и улучшает обработку функций, отключенных через XLIZARD_DISABLE.

Изменения пороговых значений
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Обновлены пороговые значения для всех метрик анализа кода:

- **CCN (Cyclomatic Complexity Number)**: 15 → 20
- **LOC (Lines of Code)**: 100 (без изменений)
- **TOKENS**: 50 → 500
- **PARAMS (Parameters)**: 5 → 3
- **DEPTH (Block Depth)**: 5 → 3
- **PP DIR (Preprocessor Directives)**: 15 → 30
- **PTR OPS (Pointer Operations)**: 20 → 70
- **FUNCS (Functions per file)**: 20 (без изменений)
- **COMMENTS**: 20 → 0 (только отображение, без проверки порога)

Новый функционал
~~~~~~~~~~~~~~~~

- **Обработка XLIZARD_DISABLE директив**:
  - Функции внутри блоков XLIZARD_DISABLE/XLIZARD_ENABLE исключаются из расчета основных метрик
  - Добавлен счетчик отключенных функций (DSB Func) для каждого файла
  - Визуальная индикация отключенных функций в отчетах

- **Улучшенная цветовая индикация** в HTML-отчетах:
  - Обновлены пороги для цветового кодирования метрик
  - Добавлены tooltips с пояснениями пороговых значений
  - Улучшена читаемость отчетов

Технические изменения
~~~~~~~~~~~~~~~~~~~~~

- **Обновлены конфигурационные файлы**:
  - `xlizard.py` - обновлены значения по умолчанию для thresholds
  - `htmloutput.py` - улучшена обработка отключенных функций
  - `sourcemonitor_metrics.py` - синхронизированы пороговые значения

- **Улучшена точность расчетов**:
  - Метрики теперь рассчитываются только для активных функций (исключая отключенные)
  - Добавлены отдельные счетчики для активных и отключенных функций

Визуальные улучшения
~~~~~~~~~~~~~~~~~~~~

- **Новые badges в HTML-отчетах**:
  - "Active Funcs" - количество активных функций в файле
  - "DSB Func" - количество отключенных функций с цветовой индикацией
  - Убрана цветовая индикация для комментариев (только отображение процента)

- **Обновленные подсказки**:
  - Изменены tooltips с пояснением новых пороговых значений

Обратная совместимость
~~~~~~~~~~~~~~~~~~~~~~

- **Полная обратная совместимость** с существующими конфигурациями
- **Автоматическое применение** новых пороговых значений
- **Сохранение всех существующих функций** без изменений

Известные ограничения
~~~~~~~~~~~~~~~~~~~~~

- Функции с XLIZARD_DISABLE полностью исключаются из всех метрик
- Для точного определения блоков отключения требуется корректное размещение директив

Миграция с версии 1.1.3
~~~~~~~~~~~~~~~~~~~~~~~

Для пользователей:
- Новые пороговые значения применяются автоматически
- Существующие отчеты будут использовать обновленные thresholds

Version 1.1.3 (09-09-2025)
--------------------------

**Улучшение точности метрик и расширение функционала**

Этот выпуск значительно улучшает точность расчетов метрик кода и добавляет новые возможности для анализа качества кода.

Новые возможности
~~~~~~~~~~~~~~~~~

- **Добавлены новые метрики анализа кода**:
  - ``logical_operators`` - подсчет логических операторов (&&, ||, !, ==, !=, <, >, <=, >=)
  - ``conditional_statements`` - подсчет условных операторов (if, else, switch, case, for, while, etc.)
  - ``lines_of_code`` - точный подсчет строк кода (исключая комментарии и пустые строки)
  - ``comment_lines`` - подсчет строк с комментариями
  - ``total_lines`` - общее количество строк в файле

- **Расширенная поддержка языков программирования**:
  - Добавлена поддержка дополнительных C-подобных расширений: .cpp, .hpp, .cc, .cxx
  - Улучшена обработка различных кодировок файлов

- **Улучшенный HTML-отчет**:
  - Улучшена адаптивная верстка для мобильных устройств

Улучшения точности
~~~~~~~~~~~~~~~~~~

- **Точный подсчет комментариев**:
  - Исправлен учет частичных комментариев (код + комментарий в одной строке)
  - Улучшено различение блочных и строчных комментариев
  - Добавлена проверка баланса комментариев

- **Точное вычисление глубины вложенности**:
  - Переработан алгоритм подсчета глубины блоков
  - Добавлена проверка баланса скобок {}
  - Учтены различные типы блоков (if, for, while, switch)

- **Точный подсчет операций с указателями**:
  - Заменен простой подсчет символов * и & на анализ паттернов
  - Добавлены регулярные выражения для идентификации реальных операций с указателями
  - Исключены ложные срабатывания (умножение, побитовые операции, ссылки)

- **Улучшенный анализ препроцессорных директив**:
  - Более точное определение директив препроцессора
  - Исключение директив из анализа основного кода

Технические улучшения
~~~~~~~~~~~~~~~~~~~~~

- **Новый класс CodeParser** для структурированного анализа кода
- **Оптимизированная многопоточность** с ограничением количества рабочих потоков
- **Улучшенная обработка ошибок** при анализе файлов с проблемными кодировками
- **Расширенная система конфигурации** с поддержкой новых метрик

Исправления ошибок
~~~~~~~~~~~~~~~~~~

- **Исправлен некорректный подсчет глубины вложенности** для файлового уровня
- **Устранены ложные срабатывания** при подсчете операций с указателями
- **Исправлена обработка файлов** с mixed-content (код + комментарии в одной строке)
- **Улучшена стабильность** при анализе больших проектов

Зависимости
~~~~~~~~~~~

- **Обновлены требования к системе**: рекомендуется Python 3.8+
- **Улучшена совместимость** с различными версиями зависимостей

Известные проблемы
~~~~~~~~~~~~~~~~~~

- Для очень больших файлов (>10MB) анализ может занимать значительное время
- Некоторые сложные макросы препроцессора могут обрабатываться некорректно

Миграция с версии 1.1.2
~~~~~~~~~~~~~~~~~~~~~~~

Для пользователей:
- Автоматическая совместимость с существующими конфигурациями
- Новые метрики будут автоматически рассчитываться для всех файлов
- Существующие пороги будут применены к новым метрикам с значениями по умолчанию
[file content end]